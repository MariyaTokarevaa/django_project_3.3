# Django REST framework: фильтрация, валидация и аутентификация
# Описание задания [Backend для приложения с объявлениями](./api_with_restrictions).

Необходимо реализовать бэкенд для мобильного приложения с объявлениями. Объявления можно создавать и просматривать. Есть возможность фильтровать объявления по дате и статусу.

Создавать могут только авторизованные пользователи. Для просмотра объявлений авторизация не нужна.

У объявления есть статусы: OPEN, CLOSED. Необходимо валидировать, что у пользователя не больше 10 открытых объявлений.

Обновлять и удалять объявление может только его автор.

Чтобы боты и злоумышленники не нагружали нашу систему, добавьте лимиты на запросы:

- для неавторизованных пользователей: 10 запросов в минуту;
 
- для авторизованных пользователей: 20 запросов в минуту.

# Реализация

Используйте DateFromToRangeFilter для фильтрации по дате https://django-filter.readthedocs.io/en/stable/ref/filters.html#datefromtorangefilter.

В настройках подключено приложение rest_framework.authtoken и сконфигурирован DEFAULT_AUTHENTICATION_CLASSES. Для того, чтобы завести токен для пользователя, проделайте следующие шаги:

- создайте пользователя через админку,
- также через админку заведите ему токен,
- этот токен используйте в запросах, передавая его в заголовках.
  
Так как интерфейс BrowserableAPI в DRF не позволяет передавать заголовки с токеном, используйте Postman или HTTP-клиент VSCode.

Для переопределения доступов для отдельных методов ViewSet используется метод get_permissions. Он добавлен в заготовку, следует с ним ознакомиться и посмотреть с помощью breakpoint'ов в какой момент DRF его вызывает.

Валидацию удаления чужого объявления следует делать:

либо внутри метода destroy https://www.django-rest-framework.org/api-guide/viewsets/#viewset-actions — это чуть проще;

либо определяя дополнительный класс-наследник BasePermission, дополнительно добавляя его в список get_permissions https://www.django-rest-framework.org/api-guide/permissions/#examples — это правильнее, и этот класс можно переиспользовать для других методов.

Любой вариант допустим в рамках этого задания.

С примерами запросов к API вы можете ознакомиться в файле requests-examples.http.
